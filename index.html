<!DOCTYPE html>
<html >
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Ken" />


    
    


<meta name="description" content="vue react 前端个人总结">
<meta name="keywords" content="vue react 前端个人总结">
<meta property="og:type" content="website">
<meta property="og:title" content="Welcome back">
<meta property="og:url" content="https://github.com/nowdothat/vue/index.html">
<meta property="og:site_name" content="Welcome back">
<meta property="og:description" content="vue react 前端个人总结">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Welcome back">
<meta name="twitter:description" content="vue react 前端个人总结">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">




    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Welcome back</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: false
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Ken</a></h1>
        </hgroup>

        
        <p class="header-subtitle">Ken的个人总结</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://github.com/nowdothat/vue">GitHub</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">本站内容均为个人学习总结，欢迎指正。邮箱：kencall@163.com</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Ken</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Ken</a></h1>
            </hgroup>
            
            <p class="header-subtitle">Ken的个人总结</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-centos6安装ssr" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/30/centos6安装ssr/" class="article-date">
      <time datetime="2020-03-30T01:50:53.067Z" itemprop="datePublished">2020-03-30</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/30/centos6安装ssr/">小白也能看懂的shadowsocks搭建</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <ol>
<li>一般有个 GUI 让你进行选择，点击确定后，查看服务器状态，在线后执行第二步</li>
<li>连接服务器,可以使用自带的 html 控制台，或者使用 xshell</li>
<li>系统初始化的端口为 22 ,可以设置一个你喜欢的端口,输入 y</li>
<li>系统正常加载必要包，期间有可能会 连接中断，如果中断了，关闭重新连接服务器，重新执行第二步</li>
<li>安装 pip 和 shadowsocks<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br><span class="line">yum install python-setuptools &amp;&amp; easy_install pip</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>如果提示你失败了，那么执行下面的命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line">yum -y install python-pip</span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure></p>
<ol start="6">
<li>配置 shadowsocks<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/shadowsocks.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:&quot;your_server_ip&quot;,</span><br><span class="line">    &quot;server_port&quot;:8888,</span><br><span class="line">    &quot;password&quot;:&quot;yourpassword&quot;,</span><br><span class="line">    &quot;timeout&quot;:3000,</span><br><span class="line">    &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class="line">    &quot;fast_open&quot;:false,</span><br><span class="line">    &quot;workers&quot;: 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">代码中各字段的含义：</span><br><span class="line"></span><br><span class="line">server：服务器 IP地址 (IPv4/IPv6)</span><br><span class="line">server_port：服务器监听的端口，一般设为80，443等，注意不要设为使用中的端口</span><br><span class="line">password：设置密码，自定义</span><br><span class="line">timeout：超时时间（秒）</span><br><span class="line">method：加密方法，可选择 “aes-256-cfb”, “rc4-md5”等等。推荐使用 “rc4-md5”</span><br><span class="line">fast_open：true 或 false。如果你的服务器 Linux 内核在3.7+，可以开启 fast_open 以降低延迟。</span><br><span class="line">workers：workers数量，默认为 1</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>6.1 配置多个账户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;server&quot;:&quot;your_server_ip&quot;,    </span><br><span class="line">  &quot;port_password&quot;:&#123;</span><br><span class="line">    &quot;8881&quot;:&quot;pass1&quot;,</span><br><span class="line">    &quot;8882&quot;:&quot;pass2&quot;,</span><br><span class="line">    &quot;8883&quot;:&quot;pass3&quot;,</span><br><span class="line">    &quot;8884&quot;:&quot;pass4&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;timeout&quot;:3000,</span><br><span class="line">  &quot;method&quot;:&quot;rc4-md5&quot;,</span><br><span class="line">  &quot;fast_open&quot;:false,</span><br><span class="line">  &quot;workers&quot;:1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意：特别注意json的格式，注意空格和Tab的用法要一致，建议用 xshell 进行连接操作，可以进行复制，不然 vi 操作很蛋疼</p>
<ol start="7">
<li><p>启动 shadowsocks</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssserver -c /etc/shadowsocks.json -d start</span><br></pre></td></tr></table></figure>
</li>
<li><p>加入开机自启</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;ssserver -c /etc/shadowsocks.json -d start&quot; &gt;&gt; /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-linux磁盘管理指令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/29/linux磁盘管理指令/" class="article-date">
      <time datetime="2020-03-29T14:05:41.433Z" itemprop="datePublished">2020-03-29</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/29/linux磁盘管理指令/">linux磁盘管理指令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h2><p>语法: ls [参数] [路径]<br>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-a 显示所有文件及目录 (ls内定将文件名或目录名称开头为&quot;.&quot;的视为隐藏档，不会列出)</span><br><span class="line">-l 除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出</span><br><span class="line">-r 将文件以相反次序显示(原定依英文字母次序)</span><br><span class="line">-t 将文件依建立时间之先后次序列出</span><br><span class="line">-A 同 -a ，但不列出 &quot;.&quot; (目前目录) 及 &quot;..&quot; (父目录)</span><br><span class="line">-F 在列出的文件名称后加一符号；例如可执行档则加 &quot;*&quot;, 目录则加 &quot;/&quot;</span><br><span class="line">-R 若目录下有文件，则以下之文件亦皆依序列出</span><br></pre></td></tr></table></figure></p>
<p>常用操作</p>
<ul>
<li>ls -A s* -&gt; 查找当前目录带有 s 字符的文件</li>
<li>ls -AF   -&gt; 列出目前工作目录下所有文件及目录；目录于名称后加 “/“, 可执行档于名称后加 “*”</li>
</ul>
<h2 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h2><p>打印当前所在路径 (print working directory)</p>
<h2 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h2><p>改变目录 (change directory)</p>
<ul>
<li>绝对路径</li>
<li>相对路径</li>
<li><code>~</code> 当前用户的家目录</li>
</ul>
<h2 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h2><p>主要注意点：</p>
<ul>
<li>-m&lt;目标属性&gt;或–mode&lt;目标属性&gt;建立目录的同时设置目录的权限； -&gt; mkdir -m 700 /usr/meng/test</li>
<li>-p或–parents 若所要建立目录的上层目录目前尚未建立，则会一并建立上层目录； -&gt; mkdir -p ./test/someFile</li>
<li>–version 显示版本信息。</li>
</ul>
<h2 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h2><ul>
<li>用于把已存在文件的时间标签更新为系统当前的时间</li>
<li>创建空文件</li>
</ul>
<p>提供的选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-a：或--time=atime或--time=access或--time=use  只更改存取时间；</span><br><span class="line">-c：或--no-create  不建立任何文件；</span><br><span class="line">-d：&lt;时间日期&gt; 使用指定的日期时间，而非现在的时间；</span><br><span class="line">-f：此参数将忽略不予处理，仅负责解决BSD版本touch指令的兼容性问题；</span><br><span class="line">-m：或--time=mtime或--time=modify  只更该变动时间；</span><br><span class="line">-r：&lt;参考文件或目录&gt;  把指定文件或目录的日期时间，统统设成和参考文件或目录的日期时间相同；</span><br><span class="line">-t：&lt;日期时间&gt;  使用指定的日期时间，而非现在的时间；</span><br><span class="line">--help：在线帮助；</span><br><span class="line">--version：显示版本信息。</span><br></pre></td></tr></table></figure></p>
<h2 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h2><p>语法：cp(选项)(参数)<br>提供的选项<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-a：此参数的效果和同时指定&quot;-dpR&quot;参数相同；</span><br><span class="line">-d：当复制符号连接时，把目标文件或目录也建立为符号连接，并指向与源文件或目录连接的原始文件或目录；</span><br><span class="line">-f：强行复制文件或目录，不论目标文件或目录是否已存在；</span><br><span class="line">-i：覆盖既有文件之前先询问用户；</span><br><span class="line">-l：对源文件建立硬连接，而非复制文件；</span><br><span class="line">-p：保留源文件或目录的属性；</span><br><span class="line">-R/r：递归处理，将指定目录下的所有文件与子目录一并处理；</span><br><span class="line">-s：对源文件建立符号连接，而非复制文件；</span><br><span class="line">-u：使用这项参数后只会在源文件的更改时间较目标文件更新时或是名称相互对应的目标文件并不存在时，才复制文件；</span><br><span class="line">-S：在备份文件时，用指定的后缀“SUFFIX”代替文件的默认后缀；</span><br><span class="line">-b：覆盖已存在的文件目标前将目标文件备份；</span><br><span class="line">-v：详细显示命令执行的操作。</span><br></pre></td></tr></table></figure></p>
<h3 id="软链接"><a href="#软链接" class="headerlink" title="软链接"></a>软链接</h3><p>软链接简单来表示： 就是建立一个快捷方式，你打开的文件就是你软链接的源文件，而且内存占用小，不与软链接的源内存占用保持一致</p>
<h3 id="硬链接"><a href="#硬链接" class="headerlink" title="硬链接"></a>硬链接</h3><p>相当于复制了一个文件，inode 相同,但是两者之一的任意发生改变，对方也会跟着改变，二者的内存大小保持一致，删除自己并不会影响对方。会改变的复制，很牛B</p>
<p>常用指令：</p>
<ul>
<li>stat someFile 查看 someFile 的 inode 内容</li>
<li>find / -inum 1114  根目录找 inode 为 1114 的文件</li>
<li>find ./ -type l -ls 找出当前目录下所有的软链接</li>
</ul>
<h2 id="mv-指令"><a href="#mv-指令" class="headerlink" title="mv 指令"></a>mv 指令</h2><p>语法： mv(选项)(参数)</p>
<p>选项<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">--backup=&lt;备份模式&gt;：若需覆盖文件，则覆盖前先行备份；</span><br><span class="line">-b：当文件存在时，覆盖前，为其创建一个备份；</span><br><span class="line">-f：若目标文件或目录与现有的文件或目录重复，则直接覆盖现有的文件或目录；</span><br><span class="line">-i：交互式操作，覆盖前先行询问用户，如果源文件与目标文件或目标目录中的文件同名，则询问用户是否覆盖目标文件。用户输入”y”，表示将覆盖目标文件；输入”n”，表示取消对源文件的移动。这样可以避免误将文件覆盖。</span><br><span class="line">--strip-trailing-slashes：删除源文件中的斜杠“/”；</span><br><span class="line">-S&lt;后缀&gt;：为备份文件指定后缀，而不使用默认的后缀；</span><br><span class="line">--target-directory=&lt;目录&gt;：指定源文件要移动到目标目录；</span><br><span class="line">-u：当源文件比目标文件新或者目标文件不存在时，才执行移动操作。</span><br></pre></td></tr></table></figure></p>
<p>常用:</p>
<ul>
<li>mv someName newName -&gt; 将 someName 文件改名为 newName 文件名</li>
<li>mv /usr/some/* . -&gt; 将/usr/some 里面的所有内容移动到当前目录</li>
</ul>
<h2 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h2><p>语法： rm (选项)(参数)</p>
<p>选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-d：直接把欲删除的目录的硬连接数据删除成0，删除该目录；</span><br><span class="line">-f：强制删除文件或目录；</span><br><span class="line">-i：删除已有文件或目录之前先询问用户；</span><br><span class="line">-r或-R：递归处理，将指定目录下的所有文件与子目录一并处理；</span><br><span class="line">--preserve-root：不对根目录进行递归操作；</span><br><span class="line">-v：显示指令的详细执行过程。</span><br></pre></td></tr></table></figure></p>
<p>注意点：<br><code>rm -r *</code> -&gt;非常危险的操作（删除当前目录下除隐含文件外的所有文件和子目录）</p>
<h2 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h2><p>一般命令的输出都会显示在终端中，有些时候需要将一些命令的执行结果想要保存到文件中进行后续的分析/统计，则这时候需要使用到的输出重定向技术<br>语法：命令执行 &gt;&gt; 结果文件 -&gt;追加效果<br>语法：命令执行 &gt; 结果文件  -&gt;覆盖效果</p>
<p>常用操作：<br>ls -la &gt;&gt; ls.txt  -&gt; 会将 ls -la 的执行结果<code>追加</code>打印在 ls.txt 文件中</p>
<h2 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h2><p>语法：cat(选项)(参数)<br>cat命令连接文件并打印到标准输出设备上，cat经常用来显示文件的内容，类似于下的type命令。</p>
<p>注意：当文件较大时，文本在屏幕上迅速闪过（滚屏），用户往往看不清所显示的内容。因此，一般用more等命令分屏显示。为了控制滚屏，可以按Ctrl+S键，停止滚屏；按Ctrl+Q键可以恢复滚屏。按Ctrl+C（中断）键可以终止该命令的执行，并且返回Shell提示符状态。</p>
<p>选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-n或-number：有1开始对所有输出的行数编号；</span><br><span class="line">-b或--number-nonblank：和-n相似，只不过对于空白行不编号；</span><br><span class="line">-s或--squeeze-blank：当遇到有连续两行以上的空白行，就代换为一行的空白行；</span><br><span class="line">-A：显示不可打印字符，行尾显示“$”；</span><br><span class="line">-e：等价于&quot;-vE&quot;选项；</span><br><span class="line">-t：等价于&quot;-vT&quot;选项</span><br></pre></td></tr></table></figure></p>
<p>常用操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat m1 （在屏幕上显示文件ml的内容）</span><br><span class="line">cat m1 m2 （同时显示文件ml和m2的内容）</span><br><span class="line">cat m1 m2 &gt; file （将文件ml和m2合并后放入文件file中）-&gt;注意，file文件会新建并且为无后缀名文件</span><br></pre></td></tr></table></figure></p>
<h3 id="如果单纯为了看文件内容-建议使用-more-someFile"><a href="#如果单纯为了看文件内容-建议使用-more-someFile" class="headerlink" title="如果单纯为了看文件内容,建议使用 more someFile"></a>如果单纯为了看文件内容,建议使用 more someFile</h3><p>记忆点：<br>cp 和 rm 指令都有 -r 参数，表示递归操作<br>mkdir 创建多级文件，需要携带 -p 参数</p>
<p>参考链接：<code>https://www.ibm.com/developerworks/cn/linux/l-cn-hardandsymb-links/index.html</code> 软硬链接</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-win10完整卸载" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/28/win10完整卸载/" class="article-date">
      <time datetime="2020-03-27T22:26:19.450Z" itemprop="datePublished">2020-03-28</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/28/win10完整卸载/">window 完整卸载</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="win10卸载"><a href="#win10卸载" class="headerlink" title="win10卸载"></a>win10卸载</h1><p>我们在卸载某些软件之后,总是删不掉对应的文件夹,原因是: 使用自带的卸载程序进行卸载后,系统依旧运行着子进程.</p>
<p>具体操作步骤如下:</p>
<ol>
<li>打开任务管理器</li>
<li>点击性能,点击资源监视器</li>
<li>点击cpu,在关联的句柄中,进行搜索,在结果中进行结束进程</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-vueVirtualDom" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/03/vueVirtualDom/" class="article-date">
      <time datetime="2020-03-03T13:49:36.415Z" itemprop="datePublished">2020-03-03</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/03/vueVirtualDom/">Vue Virtual Dom</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="virtual-dom-简介"><a href="#virtual-dom-简介" class="headerlink" title="virtual dom 简介"></a>virtual dom 简介</h1><p>当我们在用前端三大框架的时候，最常听的词汇便是 虚拟dom (virtual Dom). 本着不能知其然而不知其所以然的原则，我们来好好研究下，什么是 virtual dom</p>
<h1 id="Vue-的-virtual-dom-的生成"><a href="#Vue-的-virtual-dom-的生成" class="headerlink" title="Vue 的 virtual dom 的生成"></a>Vue 的 virtual dom 的生成</h1><p>一、将模板解析成AST</p>
<p>二、优化AST树，主要是标记静态节点</p>
<p>三、使用AST生成渲染函数</p>
<p>看下面cli例子:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;some text&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"><span class="comment">// App.vue</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure>
<p>解释： 这是一个 vue-cli 常见的模板。我们可以得到哪些信息： </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> App如果要生成 virtual dom, 生成 ast 树</span><br><span class="line">&#123;</span><br><span class="line">  tag: <span class="string">"div"</span></span><br><span class="line">  parent: <span class="literal">undefined</span>,</span><br><span class="line">  attrsList: [],</span><br><span class="line">  attrsMap: &#123;&#125;,</span><br><span class="line">  children: [&#123;</span><br><span class="line">    type: <span class="number">2</span>,</span><br><span class="line">    text: <span class="string">"some"</span>,</span><br><span class="line">    <span class="keyword">static</span>: <span class="literal">false</span></span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">2.</span> 优化 ast 树，并进行标记，如果不进行标记，就会造成渲染缓慢，出错等问题</span><br><span class="line">大家可以使用同 key 的方式进行试验</span><br><span class="line"><span class="number">3.</span> 使用js 创建node 并渲染</span><br><span class="line">  render (createElement, context) &#123;</span><br><span class="line">    <span class="keyword">return</span> createElement(&#123;<span class="built_in">String</span> | <span class="built_in">Object</span> | <span class="built_in">Function</span>&#125;, &#123;<span class="built_in">Object</span>&#125; | &#123;<span class="built_in">String</span> | <span class="built_in">Array</span>&#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><code>createElement</code> 到底会返回什么呢？其实不是一个实际的 DOM 元素。它更准确的名字可能是 createNodeDescription，因为它所包含的信息会告诉 Vue 页面上需要渲染什么样的节点，包括及其子节点的描述信息。我们把这样的节点描述为“虚拟节点 (virtual node)”，也常简写它为“VNode”。“虚拟 DOM”是我们对由 Vue 组件树建立起来的整个 VNode 树的称呼。</p>
<h1 id="vnode-的规律"><a href="#vnode-的规律" class="headerlink" title="vnode 的规律"></a>vnode 的规律</h1><p>Vnodes are re-recreated on each render, but the HTML Elements that they reference are re-used - whenever possible<br>这句话其实是很重要的, Vue 想尽办法帮我们提升性能，所以我们就需要用 key 值进行区分渲染, 这个可以联系上面提到的 生成规律第二条</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>虚拟dom 没那么高大上，也没想象中的快速。其本质就是 js 的 createElement 方法。 因为对于 浏览器而言，每个元素都是一个节点。每段文字也是一个节点。甚至注释也都是节点。一个节点就是页面的一个部分。就像家谱树一样，每个节点都可以有孩子节点 (也就是说每个部分可以包含其它的一些部分)。 因为有大量地创建节点, 要更高效地区分渲染,就是 diff 算法产生的缘由。虚拟dom先讲到这里，多说无益，不如动手。欢迎通过 <a href="mailto:kencall@163.com" target="_blank" rel="noopener">kencall@163.com</a> 联系我</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-树表互转" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/12/29/树表互转/" class="article-date">
      <time datetime="2019-12-29T06:30:35.348Z" itemprop="datePublished">2019-12-29</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/29/树表互转/">树表互转</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="树转表"><a href="#树转表" class="headerlink" title="树转表"></a>树转表</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">treeData2tableData</span>(<span class="params">td = []</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> td.reduce(</span><br><span class="line">    (acc, &#123; id, pid, children, label &#125;) =&gt; </span><br><span class="line">      [...acc, ...treeData2tableData(children), &#123; id, pid, label &#125;],</span><br><span class="line">      []</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> treeData = [</span><br><span class="line">  &#123;</span><br><span class="line">      id: <span class="string">'1'</span>, <span class="attr">pid</span>: <span class="literal">null</span>, <span class="attr">label</span>: <span class="string">'1'</span>,</span><br><span class="line">      children: [</span><br><span class="line">          &#123;</span><br><span class="line">              id: <span class="string">'1-1'</span>, <span class="attr">pid</span>: <span class="string">'1'</span>, <span class="attr">label</span>: <span class="string">'1-1'</span>,</span><br><span class="line">              children: [</span><br><span class="line">                  &#123;</span><br><span class="line">                      id: <span class="string">'1-1-1'</span>, <span class="attr">pid</span>: <span class="string">'1-1'</span>, <span class="attr">label</span>: <span class="string">'1-1-1'</span>,</span><br><span class="line">                  &#125;</span><br><span class="line">              ]</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">              id: <span class="string">'1-2'</span>, <span class="attr">pid</span>: <span class="string">'1'</span>, <span class="attr">label</span>: <span class="string">'1-2'</span></span><br><span class="line">          &#125;</span><br><span class="line">      ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">      id: <span class="string">'2'</span>, <span class="attr">pid</span>: <span class="literal">null</span>, <span class="attr">label</span>: <span class="string">'2'</span>,</span><br><span class="line">      children: [</span><br><span class="line">          &#123;</span><br><span class="line">              id: <span class="string">'2-1'</span>, <span class="attr">pid</span>: <span class="string">'2'</span>, <span class="attr">label</span>: <span class="string">'2-1'</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">              id: <span class="string">'2-2'</span>, <span class="attr">pid</span>: <span class="string">'2'</span>, <span class="attr">label</span>: <span class="string">'2-2'</span></span><br><span class="line">          &#125;</span><br><span class="line">      ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> cc = treeData2tableData(treeData)</span><br><span class="line"><span class="built_in">console</span>.log(cc)</span><br></pre></td></tr></table></figure>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><ol>
<li><p>首选设置函数参数的默认值,这是为了解决 children 为空的情况</p>
</li>
<li><p>结构必要的 key 值, 进行循环 children</p>
</li>
<li><p>递归分析 : </p>
<ol>
<li>children 进行函数执行，初始值还是为 [], 所以解构为 <ol>
<li>id: ‘1-1’, pid: ‘1’, label: ‘1-1’, children: []</li>
</ol>
</li>
<li>继续执行 …treeData2tableData(children) 函数</li>
<li>解构为 id: ‘1-1-1’, pid: ‘1-1’, label: ‘1-1-1’ …</li>
<li>继续执行 …treeData2tableData(children) ， 因为为 undefined, 所以用 [] 进行执行函数</li>
<li>回到堆地址，继续执行 解构 [{id, pid, label}]</li>
<li>输出 [{id: ‘1-1-1’, pid: ‘1-1’, label: ‘1-1-1’}]</li>
</ol>
</li>
<li><p>继续执行 reduce 函数, 因为上一次返回的是 [{id: ‘1-1-1’, pid: ‘1-1’, label: ‘1-1-1’}],将其压入堆，找到上一次起始点</p>
<ol>
<li><p>找到上一次起始点为: {id: ‘1-1’, pid: ‘1’, label: ‘1-1’}, 根据 reduce 的特性, acc 的值为 :<br>  [{id: ‘1-1-1’, pid: ‘1-1’, label: ‘1-1-1’},{id: ‘1-1’, pid: ‘1’, label: ‘1-1’}]</p>
</li>
<li><p>所以下一个要执行的对象就为 {id: ‘1-2’, pid: ‘1’, label: ‘1-2’}了, 执行.. 解构 …， 数组为空…</p>
</li>
<li><p>return 解构后的内容:<br>  [{id: “1-1-1”, pid: “1-1”, label: “1-1-1”},{id: “1-1”, pid: “1”, label: “1-1”},{id: “1-2”, pid: “1”, label: “1-2”}]</p>
</li>
<li><p>继续 执行 acc …..</p>
</li>
</ol>
</li>
</ol>
<h3 id="难点"><a href="#难点" class="headerlink" title="难点"></a>难点</h3><ul>
<li>首先需要 了解 reduce 的特性， 将参数里的内容依次执行一遍函数，如果传入初始值，那么 索引将从 0 开始，否则从 1 开始</li>
<li>注意处理 为空 的情况， 当参数为空时，进行堆地址回归, 返回 reduce 计算</li>
</ul>
<h1 id="表转树"><a href="#表转树" class="headerlink" title="表转树"></a>表转树</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tableData2treeData</span>(<span class="params">td = []</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  <span class="keyword">const</span> rest = [...td]</span><br><span class="line">  <span class="keyword">const</span> ret = []</span><br><span class="line">  <span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> originItem = rest.shift()</span><br><span class="line">    <span class="keyword">const</span> &#123; id, pid, ...restProps &#125; = originItem</span><br><span class="line">    <span class="keyword">const</span> item = &#123;id, pid, ...restProps&#125;</span><br><span class="line">    <span class="keyword">const</span> target = cache.get(pid)</span><br><span class="line">    <span class="keyword">if</span>(pid === <span class="literal">null</span>) &#123;</span><br><span class="line">      ret.push(item)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target)&#123;</span><br><span class="line">      (target.children || (target.children = [])).push(item)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      rest.push(item)</span><br><span class="line">    &#125;</span><br><span class="line">    cache.set(id, item);</span><br><span class="line">  &#125; <span class="keyword">while</span> (rest.length);</span><br><span class="line">  <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tableData = [</span><br><span class="line">  &#123;<span class="attr">id</span>: <span class="string">'1'</span>, <span class="attr">pid</span>: <span class="literal">null</span>, <span class="attr">label</span>: <span class="string">'1'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>: <span class="string">'1-1'</span>, <span class="attr">pid</span>: <span class="string">'1'</span>, <span class="attr">label</span>: <span class="string">'1-1'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>: <span class="string">'1-1-1'</span>, <span class="attr">pid</span>: <span class="string">'1-1'</span>, <span class="attr">label</span>: <span class="string">'1-1-1'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>: <span class="string">'1-2'</span>, <span class="attr">pid</span>: <span class="string">'1'</span>, <span class="attr">label</span>: <span class="string">'1-2'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>: <span class="string">'2'</span>, <span class="attr">pid</span>: <span class="literal">null</span>, <span class="attr">label</span>: <span class="string">'2'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>: <span class="string">'2-1'</span>, <span class="attr">pid</span>: <span class="string">'2'</span>, <span class="attr">label</span>: <span class="string">'2-1'</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>: <span class="string">'2-2'</span>, <span class="attr">pid</span>: <span class="string">'2'</span>, <span class="attr">label</span>: <span class="string">'2-2'</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> test = tableData2treeData(tableData)</span><br><span class="line"><span class="built_in">console</span>.log(test)</span><br></pre></td></tr></table></figure>
<h2 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h2><ol>
<li><p>首先观察数据结构:</p>
<p>  1.1 顶级元素的 id为 1 , 2, pid 为 null</p>
<p>  1.2 子级的 pid 为 父级的 id</p>
<p>  1.3 孙级的 pid 为 子级的 id </p>
<p>  1.4 整个数组为 顶级元素一整个对象，里面 children 无限嵌套  </p>
</li>
<li><p>函数分析</p>
<p>  2.1 这里使用 Map 对象  Map对象与 Object 类似,可自由选择 : Map 在涉及频繁增删键值对的场景下会有些性能优势</p>
<p>  2.2 如果 pid 为顶级元素 null, 则直接 push 进行 ret 里</p>
<p>  2.3 如果 子级的 pid === 父级 id, 判断是否存在 children，否则定义 [] 进行 push</p>
<p>  2.4 循环拿取 判断 push 进不同的 item 里面</p>
<p>  2.5 返回 ret</p>
</li>
</ol>
<h3 id="难点-1"><a href="#难点-1" class="headerlink" title="难点"></a>难点</h3><ul>
<li>学习使用 Map 对象</li>
</ul>
<p>​        </p>
<p>​          </p>
<p>​          </p>
<p>​          </p>
<p>​          </p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-git实用技巧" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/11/25/git实用技巧/" class="article-date">
      <time datetime="2019-11-25T12:43:14.832Z" itemprop="datePublished">2019-11-25</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/25/git实用技巧/">git 实用技巧</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="什么是-Git"><a href="#什么是-Git" class="headerlink" title="什么是 Git"></a>什么是 Git</h1><p>git 是一个分布式版本控制系统,维护的就是一个commitID树，分别保存着不同状态下的代码。 所以你对代码的任何修改，最终都会保存在本地的 .git 文件夹下</p>
<h2 id="新增分支"><a href="#新增分支" class="headerlink" title="新增分支"></a>新增分支</h2><p>git checkout -b newBranch<br>git push origin newBranch</p>
<h2 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h2><p>// 删除本地分支，如果本地还有未合并的代码，则不能删除<br>git branch -d oldBranch<br>// 强制删除本地分支<br>git branch -D oldBranch<br>// 删除远程分支<br>git push origin -d oldBranch</p>
<h2 id="修改未-push-的-commit-信息"><a href="#修改未-push-的-commit-信息" class="headerlink" title="修改未 push 的 commit 信息"></a>修改未 push 的 commit 信息</h2><p><code>git commit --amend</code> 可以对上一次的提交做修改</p>
<h2 id="添加某一文件全部内容"><a href="#添加某一文件全部内容" class="headerlink" title="添加某一文件全部内容"></a>添加某一文件全部内容</h2><p><code>git add header-footer/xx/pc</code><br><code>git add file/xx</code></p>
<h2 id="取消删除跟踪文件"><a href="#取消删除跟踪文件" class="headerlink" title="取消删除跟踪文件"></a>取消删除跟踪文件</h2><p><code>git checkout .</code> &amp;&amp; <code>git clean -xdf</code>    ： 请勿随便使用  git clean -xdf</p>
<h2 id="取消删除最后一个提交-更改"><a href="#取消删除最后一个提交-更改" class="headerlink" title="取消删除最后一个提交/更改"></a>取消删除最后一个提交/更改</h2><p><code>git reset HEAD~1</code>   : 此命令将恢复/删除最后一个提交/更改，然后可以再次 pull 再推送,可用其来解决冲突（保存文件，执行命令，git pull ， 放置文件）</p>
<h2 id="回滚记录"><a href="#回滚记录" class="headerlink" title="回滚记录"></a>回滚记录</h2><p>// 会将提交记录回滚，代码不回滚，用来合并 commit<br>git reset abc123</p>
<p>// 会将提交记录和代码全部回滚<br>git reset –hard abc123</p>
<p>// 将部分代码文件回滚<br>git checkout – files</p>
<h2 id="stash-储藏"><a href="#stash-储藏" class="headerlink" title="stash 储藏"></a>stash 储藏</h2><p>stash 储藏，只能保存修改，不能储藏新建文件</p>
<p>使用方法: </p>
<p>git stash save ‘some ‘      保存信息—可进行切换分支<br>git stash list        查看所有列表<br>git stash apply       不会删除进行恢复<br>git stash pop          恢复删除<br>git stash clear         全部删除</p>
<h2 id="合并-commit"><a href="#合并-commit" class="headerlink" title="合并 commit"></a>合并 commit</h2><h3 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h3><ol>
<li>git rebase -i commitId (这个 commitid 是跟随之后的id, 也就是 合并的分支的前一个分支–  分支 123 ，那么久是git log 的 第三个 commitid)</li>
<li>然后修改下方的 id pick 为 squash</li>
<li>删除老的commit 信息， 输入新的 commit 信息</li>
<li>:wq  over</li>
</ol>
<h3 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h3><p>使用 git log 找到起始 commitID<br>git reset commitID，切记不要用 –hard 参数<br>重新 git add &amp;&amp; git commit<br>git push -f origin branchName，因为会有冲突，所以需要强制覆盖远端分支，请务必谨慎。<br>合并到 master 中，然后更新远端 master。</p>
<h2 id="reflog-找回丢失的提交"><a href="#reflog-找回丢失的提交" class="headerlink" title="reflog 找回丢失的提交"></a>reflog 找回丢失的提交</h2><p>变基时干掉过的某次提交，你只要在本地工作副本中提交过，那么，提交就会被添加到引用日志 <code>reflog</code> 中，你依然可以通过 <code>git reflog</code> 显示当前分支的所有活动的列表<br>运行：</p>
<ol>
<li>git reflog</li>
<li>git checkout <code>想回到的地方</code></li>
<li>复制信息</li>
<li>git checkout HEAD</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-observerDesign" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/27/observerDesign/" class="article-date">
      <time datetime="2019-07-27T14:06:05.471Z" itemprop="datePublished">2019-07-27</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/27/observerDesign/">js-Observer pattern</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>前言: 如有错误和遗漏，欢迎通过<a href="mailto:kencall@163.com" target="_blank" rel="noopener">kencall@163.com</a>联系我</p>
<h1 id="Observer-JavaScript-Design-Pattern"><a href="#Observer-JavaScript-Design-Pattern" class="headerlink" title="Observer JavaScript Design Pattern"></a>Observer JavaScript Design Pattern</h1><p>观察者模式Observer是一种设计模式，其中，一个对象，称为subject维持一系列依赖于它（观察者）的对象，将有关状态的任何变更自动通知给它们。</p>
<p>网上很多人将观察者模式与发布订阅模式（Publish/Subscribe）进行混淆。它们之间确实有很多相同点，但是在设计上还是有很大不同。</p>
<p>ok,废话不多说。看javaScript设计模式中的代码:</p>
<h2 id="构建Observer的CRUD"><a href="#构建Observer的CRUD" class="headerlink" title="构建Observer的CRUD"></a>构建Observer的CRUD</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ObserverList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.observerList = []</span><br><span class="line">&#125;</span><br><span class="line">ObserverList.prototype.Add = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.observerList.push(obj)</span><br><span class="line">&#125;</span><br><span class="line">ObserverList.prototype.Empty = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.observerList = []</span><br><span class="line">&#125;</span><br><span class="line">ObserverList.prototype.Count = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.observerList.length</span><br><span class="line">&#125;</span><br><span class="line">ObserverList.prototype.Get = <span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(index &gt; <span class="number">-1</span> &amp;&amp; index &lt; <span class="keyword">this</span>.observerList.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.observerList[index]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//新增observer的位置不是最后就是最前</span></span><br><span class="line">ObserverList.prototype.Insert = <span class="function"><span class="keyword">function</span>(<span class="params">obj,index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pointer = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(index === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.observerList.unshift(obj)</span><br><span class="line">        pointer = index;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (index === <span class="keyword">this</span>.observerList.length) &#123;</span><br><span class="line">        <span class="keyword">this</span>.observerList.push(obj)</span><br><span class="line">        pointer = index;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pointer</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 找寻observer的具体索引</span></span><br><span class="line">ObserverList.prototype.IndexOf = <span class="function"><span class="keyword">function</span>(<span class="params">obj, startIndex</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i = startIndex, pointer = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i&lt; <span class="keyword">this</span>.observerList.length) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.observerList[i] === obj) &#123;</span><br><span class="line">            pointer = i;</span><br><span class="line">        &#125;</span><br><span class="line">        i++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pointer</span><br><span class="line">&#125;</span><br><span class="line">ObserverList.prototype.RemoveIndexAt = <span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(index === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.observerList.shift()</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (index === <span class="keyword">this</span>.observerList.length<span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.observerList.pop()</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> reset = <span class="keyword">this</span>.observerList.slice(index + <span class="number">1</span>);</span><br><span class="line">      <span class="keyword">this</span>.observerList.length = index &lt; <span class="number">0</span> ? <span class="keyword">this</span>.observerList.length + index : index;</span><br><span class="line">      <span class="keyword">this</span>.observerList = <span class="keyword">this</span>.observerList.concat(reset)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个赋值方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">obj, extension</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        extension[key] = obj[key]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="subject对observer的CRUD"><a href="#subject对observer的CRUD" class="headerlink" title="subject对observer的CRUD"></a>subject对observer的CRUD</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 具体动作的发出者，维护者 --用于发布信息给依赖于它的观察者对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Subject</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.observers = <span class="keyword">new</span> ObserverList;</span><br><span class="line">&#125;</span><br><span class="line">Subject.prototype.AddObserver = <span class="function"><span class="keyword">function</span>(<span class="params">observer</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.observers.Add(observer)  </span><br><span class="line">&#125;</span><br><span class="line">Subject.prototype.RemoveObserver = <span class="function"><span class="keyword">function</span>(<span class="params">observer</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.observers.RemoveIndexAt(<span class="keyword">this</span>.observers.IndexOf(observer, <span class="number">0</span>))</span><br><span class="line">&#125;</span><br><span class="line">Subject.prototype.Notify = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> observerCount = <span class="keyword">this</span>.observers.Count()</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; observerCount; i++) &#123;</span><br><span class="line">    <span class="comment">// 这里的Update是实例方法</span></span><br><span class="line">        <span class="keyword">this</span>.observers.Get(i).Update(context)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="实际应用1"><a href="#实际应用1" class="headerlink" title="实际应用1"></a>实际应用1</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"addNewObserver"</span>&gt;</span>Add New observer checkbox<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"mainCheckbox"</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"observersContainer"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"observerControl"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./observer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">   	<span class="keyword">var</span> controlCheckBox = <span class="built_in">document</span>.getElementById(<span class="string">'mainCheckbox'</span>),</span></span><br><span class="line"><span class="javascript">        addObserverBtn = <span class="built_in">document</span>.getElementById(<span class="string">'addNewObserver'</span>),</span></span><br><span class="line"><span class="javascript">        container = <span class="built_in">document</span>.getElementById(<span class="string">'observerContainer'</span>)</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 这个按钮就是一个具体目标，控制发布所有信息给它的观察者</span></span></span><br><span class="line"><span class="javascript">    extend(<span class="keyword">new</span> Subject(), controlCheckbox)</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 当这个具体目标点击时，会触发依赖于suject的各个观察者对象</span></span></span><br><span class="line"><span class="javascript">    controlCheckbox[<span class="string">"onclick"</span>] = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"controlCheckbox.Notify(controlCheckbox.checked)"</span>)  </span></span><br><span class="line"><span class="javascript">    <span class="comment">// 接下来定义多个基于suject的各个观察者</span></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">Observer</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">this</span>.Update = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">              <span class="comment">// 这里的方法一般会被重写,因为在这个例子中，this需要指向inputDOM本身才有意义，如果将check定义在这里的话，无法找到this,DOM本身</span></span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">AddNewObserver</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> check = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>)</span></span><br><span class="line"><span class="javascript">          check.type=<span class="string">"checkbox"</span></span></span><br><span class="line"><span class="javascript">          extend(<span class="keyword">new</span> Observer(), check)</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 上面是添加一个观察者</span></span></span><br><span class="line"><span class="javascript">          check.Update = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">              <span class="comment">// 同步多个observer的更新方法</span></span></span><br><span class="line"><span class="javascript">              <span class="keyword">this</span>.checked = value;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// suject目标添加观察者</span></span></span><br><span class="line"><span class="undefined">          controlCheckbox.AddObserver(check)</span></span><br><span class="line"><span class="undefined">          container.appendChild(check)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 这里只是为了测试--新增多个观察者</span></span></span><br><span class="line"><span class="javascript">      addObserverBtn[<span class="string">"onclick"</span>] = AddNewObserver</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="实际应用2"><a href="#实际应用2" class="headerlink" title="实际应用2"></a>实际应用2</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"subject"</span>&gt;</span>我是具体目标<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"observer1"</span>&gt;</span>我是观察者1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"observer2"</span>&gt;</span>我是观察者2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"observer3"</span>&gt;</span>我是观察者3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"cancalObserver"</span>&gt;</span>解除第二个观察者<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./observer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> subject = <span class="built_in">document</span>.getElementById(<span class="string">'subject'</span>),</span></span><br><span class="line"><span class="javascript">      observer1 = <span class="built_in">document</span>.getElementById(<span class="string">'observer1'</span>),</span></span><br><span class="line"><span class="javascript">      observer2 = <span class="built_in">document</span>.getElementById(<span class="string">'observer2'</span>),</span></span><br><span class="line"><span class="javascript">      observer3 = <span class="built_in">document</span>.getElementById(<span class="string">'observer3'</span>),</span></span><br><span class="line"><span class="javascript">      cancalObserver = <span class="built_in">document</span>.getElementById(<span class="string">'cancalObserver'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 定义subject</span></span></span><br><span class="line"><span class="javascript">  extend(<span class="keyword">new</span> Subject(), subject);    </span></span><br><span class="line"><span class="javascript">  subject.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 触发更新机制</span></span></span><br><span class="line"><span class="javascript">    subject.Notify(<span class="string">'明天放假一天'</span>)</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 定义observer及其回调</span></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Observer</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 这个函数的作用在于抽象，如果事件不复杂的话，也可以像下面一样，直接自定义  </span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.Update= <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 给suject添加observer</span></span></span><br><span class="line"><span class="undefined">  subject.AddObserver(observer1)</span></span><br><span class="line"><span class="undefined">  subject.AddObserver(observer2)</span></span><br><span class="line"><span class="undefined">  subject.AddObserver(observer3)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  observer1.Update= <span class="function"><span class="keyword">function</span>(<span class="params">acceptInfo</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(acceptInfo+<span class="string">'-- 好的，观察者一收到'</span>)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  observer2.Update= <span class="function"><span class="keyword">function</span>(<span class="params">acceptInfo</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(acceptInfo+<span class="string">'-- 好的，观察者二收到'</span>)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  observer3.Update= <span class="function"><span class="keyword">function</span>(<span class="params">acceptInfo</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(acceptInfo+<span class="string">'-- 好的，观察者三收到'</span>)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 解除某一观察者</span></span></span><br><span class="line"><span class="javascript">  cancalObserver.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">    subject.RemoveObserver(observer2),</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'观察者二解除观察----》》》'</span>)</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>那么最后：什么是观察者模式—&gt; : </p>
<ol>
<li>首先要定义一个subject目标源，监听某一事件-&gt;触发subject.Notify(-&gt;触发observer.Update())</li>
<li>定义具体的observer,考虑事件是否可抽象-&gt;(subject发布信息后，观察者具体需要做的事情)</li>
<li>给subject添加具体的observer</li>
</ol>
<h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h3><p>The <strong>observer pattern</strong> is a software design pattern in which an object, called the <strong>subject</strong>, maintains a list of its dependents, called <strong>observers</strong>, and notifies them automatically of any state changes, usually by calling one of their methods.</p>
<p>subject触发某一事件的时候，会自动发布事件给它的观察者。这个观察者不需要监听某一事件.但是suject必须显示地添加其观察者</p>
<h3 id="发布-订阅模式"><a href="#发布-订阅模式" class="headerlink" title="发布/订阅模式"></a>发布/订阅模式</h3><p>In ‘Publisher-Subscriber’ pattern, senders of messages, called <strong>publishers</strong>, do not program the messages to be sent directly to specific receivers, called <strong>subscribers.</strong></p>
<p>而发布者不必知道订阅者是谁，只需要将事件发布到一个“中间件”，由中间件去处理订阅者的不同需求</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-TCP" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/06/26/TCP/" class="article-date">
      <time datetime="2019-06-26T14:52:14.126Z" itemprop="datePublished">2019-06-26</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/26/TCP/">TCP/IP协议</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="什么是TCP-IP协议"><a href="#什么是TCP-IP协议" class="headerlink" title="什么是TCP/IP协议"></a>什么是TCP/IP协议</h1><ul>
<li><p>TCP/IP协议（传输控制协议/互联网协议）不是简单的一个协议，而是一组特别的协议，包括：TCP，IP，UDP，ARP等，这些被称为子协议。在这些协议中，最重要、最著名的就是TCP和IP。因此，大部分网络管理员称整个协议族为“TCP/IP”。</p>
</li>
<li><p>TCP/IP的迅速流行要归功于它的低成本、可在不同的平台间进行通信的能力和它开放的特性。“开放”的意思是软件开发人员可以自由地使用和修改TCP/IP的核心协议。TCP/IP是Internet实际采用的标准。UNIX和Linux一直都使用TCP/IP，Windows网络操作系统也以TCP/IP作为默认的协议。</p>
</li>
</ul>
<h2 id="分层"><a href="#分层" class="headerlink" title="分层"></a>分层</h2><ul>
<li>链路层</li>
<li>网络层</li>
<li>传输层</li>
<li>应用层</li>
</ul>
<p><img src="/nowdothat/vue/2019/06/26/TCP/snipaste_level.png" alt="snipaste_level"></p>
<ol>
<li>第一层：网络接口层：TCP/IP协议的最低一层，对实际的网络媒体的管理，包括操作系统中的设备驱动程序和计算机对应的网络接口</li>
<li>第二层：网络层：该层负责相同或不同网络中计算机之间的通信主要处理数据包和路由。数据包是网络传输的最小数据单位。通过某条传输路线将数据包传给对方。IP协议,ICMP协议，IGMP协议。在IP层中，ARP协议用于将IP地址转换成物理地址，ICMP协议用于报告差错和传送控制信息。IP协议在TCP/IP协议组中处于核心地位。</li>
<li>第三层：传输层：提供TCP(传输控制协议)，UDP（用户数据报协议）两个协议，主要功能是数据格式化、数据确认和丢失重传等。</li>
<li>第四层：应用层：TCP/IP协议的<strong>应用层</strong>相当于OSI模型的<strong>会话层、表示层和应用层</strong>，FTP(文件传输协议)，DNS（域名系统），HTTP协议，Telnet（网络远程访问协议）</li>
</ol>
<h1 id="主讲第三层的TCP传输控制协议"><a href="#主讲第三层的TCP传输控制协议" class="headerlink" title="主讲第三层的TCP传输控制协议"></a>主讲第三层的TCP传输控制协议</h1><p><code>简述</code></p>
<p>TCP将包排序并进行错误检查，同时实现<a href="https://baike.baidu.com/item/%E8%99%9A%E7%94%B5%E8%B7%AF/1609903" target="_blank" rel="noopener">虚电路</a>间的连接。TCP数据包中包括序号和确认，所以未按照顺序收到的包可以被排序，而损坏的包可以被重传。</p>
<p>TCP是面向连接的，无论哪一方向另一方发送数据之前，都必须先在双方之间建立一条连接。在TCP/IP协议中，TCP协议提供可靠的连接服务，连接是通过三次握手进行初始化的。三次握手的目的是同步连接双方的序列号和确认号并交换 TCP窗口大小信息。</p>
<p><code>tcp包结构</code></p>
<p><img src="/nowdothat/vue/2019/06/26/TCP/snipaste_tcpdata.png" alt="snipaste_tcpdata"></p>
<p>阮一峰老师的博客：以太网数据包（packet）的大小是固定的，最初是1518字节，后来增加到1522字节。其中， 1500 字节是负载（payload），22字节是头信息（head）</p>
<p>我的理解：在链路层，由以太网的物理特性决定了数据帧的长度为(46＋18)－(1500＋18)，其中的18是数据帧的头和尾，也就是说数据帧的内容最大为1500(不包括帧头和帧尾)，即MTU(Maximum Transmission Unit)为1500</p>
<p><img src="/nowdothat/vue/2019/06/26/TCP/snipaste_MTUSize.png" alt="snipaste_MTUSize"></p>
<p>所以TCP包的大小：MTU字节大小1500-IP头部信息20-TCP头长度20-TCP timestrap option12 = 1448Byte</p>
<p><img src="/nowdothat/vue/2019/06/26/TCP/snipaste_TCPDataPage.png" alt="snipaste_TCPDataPage"></p>
<p>根据上面这张图，可得知：IP数据包在以太网数据包里面,TCP数据包在IP数据包里面</p>
<h3 id="tcp的序号seq"><a href="#tcp的序号seq" class="headerlink" title="tcp的序号seq"></a>tcp的序号seq</h3><p>TCP会话的每一端都包含一个32位（bit）的序列号，该序列号被用来跟踪该端发送的数据量。每一个包中都包含序列号，在接收端则通过确认号用来通知发送端数据成功接收</p>
<p>当某个主机开启一个TCP会话时，他的初始序列号是随机的，可能是0和4,294,967,295(二的32次方-1)之间的任意值———tcp/ip详解协议卷第18章18.2.3解释初始序列号随时间变化，每个连接有不同的初始序列号，每4ms加一</p>
<hr>
<p>在 TCP 数据报中，有一个 序列号 (Sequence Number)。如果序列号被人猜出来，就会展现出 TCP 的脆弱性。</p>
<p>如果选择合适的序列号、IP地址以及端口号，那么任何人都能伪造出一个 TCP 报文段，从而 打断 TCP 的正常连接[RFC5961]。一种抵御上述行为的方法是使初始序列号(或者临时端口 号[RFC6056])变得相对难以被猜出，而另一种方法则是加密。</p>
<p>Linux 系统采用一个相对复杂的过程来选择它的初始序列号。它采用基于时钟的方案，并且针对每一个连接为时钟设置随机的偏移量。随机偏移量是在连接标识(由 2 个 IP 地址与 2 个端口号构成的 4 元组，即 4 元组)的基础上利用加密散列函数得到的。散列函数的输人每隔 5 分钟就会改变一次。在 32 位的初始序列号中，最高的 8 位是一个保密的序列号，而剩余的备位则由散列函数生成。上述方法所生成的序列号很难被猜出，但依然会随着时间而逐步增加。据报告显示， Windows 系统使用了一种基于 RC4[S94] 的类似方案。</p>
<h4 id="数据包的分割"><a href="#数据包的分割" class="headerlink" title="数据包的分割"></a>数据包的分割</h4><p>那么一次性发送大量数据，就必须分成多个包。比如，一个 100000字节大小的文件/MSS最大报文长度 = TCP报文段</p>
<h3 id="tcp的确认号ack"><a href="#tcp的确认号ack" class="headerlink" title="tcp的确认号ack"></a>tcp的确认号ack</h3><ol>
<li><p>发送数据： 服务器向客户端发送一个带有数据的数据包。该数据包中的序列号和确认号与建立连接的第三步的数据包的序列号和确认号相同</p>
</li>
<li><p>确认收到: 客户端收到该数据包，向服务器发送一个确认数据包。该数据包中，序列号是为上一个数据包中的确认号值</p>
<p>这个确认号为服务器发送的上一个数据包中的序列号+该数据包中所带的数据的大小</p>
<p>回复确认收到的ack = 收到了序列号 + 数据的大小（同时也表示下一次期望收到的序号）</p>
</li>
</ol>
<ul>
<li>主机A接收主机b 假设编号为0-535的字节（意味着mss值为535byte）,主机A会在发往主机B的报文段的确认号字段ack上填上536</li>
<li><p>每一个包都可以得到seq和ack, 接收方就可以根据编号进行排序（按照什么顺序进行还原原始文件）或者丢弃。发送方根据ack判断接收方是否收到了指定包，判断是否需要重传</p>
<p> ​——————这样就保证了数据通信的完整性和可靠性，防止丢包</p>
</li>
</ul>
<h1 id="tcp头字段"><a href="#tcp头字段" class="headerlink" title="tcp头字段"></a>tcp头字段</h1><table>
<thead>
<tr>
<th>seq</th>
<th>序号 32位标识数据段在已发送的数据流中的位置</th>
</tr>
</thead>
<tbody>
<tr>
<td>ack</td>
<td>确认号,验证是否已被接收</td>
</tr>
<tr>
<td>SYN</td>
<td>为1表示这是连接请求或是连接接受请求，用于创建连接和使顺序号同步</td>
</tr>
<tr>
<td>ACK</td>
<td>为1表示确认号字段有效</td>
</tr>
<tr>
<td>FIN</td>
<td>为1表示发送方没有数据要传输了，要求释放连接。</td>
</tr>
<tr>
<td>PSH</td>
<td>指示接收方应该尽快将这个报文段交给应用层而不用等待缓冲区装满</td>
</tr>
<tr>
<td>RST</td>
<td>为1表示出现严重差错。可能需要重现创建TCP连接。还可以用于拒绝非法的报文段和拒绝连接请求</td>
</tr>
</tbody>
</table>
<h1 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h1><ol>
<li>客户端通过向服务器端发送一个SYN来创建一个主动打开，作为三次握手的一部分。客户端把这段连接的序号设定为随机数<strong>A</strong>。</li>
<li>服务器端应当为一个合法的SYN回送一个SYN/ACK。ACK的确认码应为<strong>A+1</strong>，SYN/ACK包本身又有一个随机产生的序号<strong>B</strong>。</li>
<li>最后，客户端再发送一个<a href="https://zh.wikipedia.org/wiki/%E7%A2%BA%E8%AA%8D%E8%A8%8A%E6%81%AF" target="_blank" rel="noopener">ACK</a>。此时包的序号被设定为<strong>A+1</strong>，而ACK的确认码则为<strong>B+1</strong>。当服务端收到这个ACK的时候，就完成了三次握手，并进入了连接创建状态。</li>
<li>这里的+1是根据发送的length来决定的</li>
</ol>
<p><img src="/nowdothat/vue/2019/06/26/TCP/snipaste_startConnect.png" alt="snipaste_startConnect"></p>
<h1 id="数据传输"><a href="#数据传输" class="headerlink" title="数据传输"></a>数据传输</h1><p>服务端发送的seq和ack必须和第三次客户端回传的seq和ack保持一致</p>
<p>客户端确认收到：seq = 服务端的ack  ack = 服务端的seq+该数据包中所带数据的大小（同时也表示下一次期望收到的序号）</p>
<p>服务器回应：seq = 客户端回传的ack  ack = 客户端回传的seq+客户端回传的length</p>
<h1 id="关闭连接"><a href="#关闭连接" class="headerlink" title="关闭连接"></a>关闭连接</h1><p>在这个过程中连接的每一侧都独立地被终止。当一个端点要停止它这一侧的连接，就向对侧发送FIN，对侧回复ACK表示确认。因此，拆掉一侧的连接过程需要一对FIN和ACK，分别由两侧端点发出。所以本质是二次，因为是双工原因，所以有4次挥手</p>
<p><code>首先发出FIN的一侧，如果给对侧的FIN响应了ACK，那么就会超时等待2*MSL时间，然后关闭连接</code></p>
<p>注意： 首先发出FIN的一侧，如果给对侧的FIN响应了ACK，那么就会超时等待2*MSL时间，然后关闭连接</p>
<p><img src="/nowdothat/vue/2019/06/26/TCP/snipaste_stopConnect.png" alt="snipaste_stopConnect"></p>
<h1 id="总述"><a href="#总述" class="headerlink" title="总述"></a>总述</h1><p><img src="/nowdothat/vue/2019/06/26/TCP/snipaste_summanry.png" alt="snipaste_summanry"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2020 Ken
                个人总结
            </div>
            <div class="footer-right">
                <span id="busuanzi_container_site_pv">
                    本站总访问量<span id="busuanzi_value_site_pv"></span>次
                </span>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
    </script>
    <script type="text/Javascript"> document.onselectstart=function(e){return false;}; </script>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
            
            
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
  <script type="text/javascript" color="234,11,90" opacity='1' src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
</body>
</html>